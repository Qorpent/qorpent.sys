#!/bin/sh
trg=./src/js/leaflet-amd.js
echo "define([],function(){" > $trg
echo "if ( typeof window === 'undefined' ) {console.error('no window  (leaflet)');return null;}" >> $trg
echo "if ( typeof window.L !== 'undefined' ) return window.L;" >> $trg
cat ./src/js/tmp-import/leaflet-src.js >> $trg
echo "" >> $trg
echo "return window.L;" >> $trg
echo "});" >> $trg

trg=./src/js/leaflet-awesome-amd.js
echo "define(['leaflet-amd'],function(){" > $trg
echo "if ( typeof window === 'undefined' ) {console.error('no window  (awesome)');return null;}" >> $trg
echo "if ( typeof window.L === 'undefined' ){console.error('no leaflet (awesome)');return null;};" >> $trg
echo "if ( typeof window.L.AwesomeMarkers !== 'undefined' ) return window.L;" >> $trg
cat ./src/js/tmp-import/leaflet.awesome-markers.js >> $trg
echo "" >> $trg
echo "return window.L;" >> $trg
echo "});" >> $trg

trg=./src/js/leaflet-draw-amd.js
echo "define(['leaflet-amd'],function(){" > $trg
echo "if ( typeof window === 'undefined' ) {console.error('no window  (draw)');return null;}" >> $trg
echo "if ( typeof window.L === 'undefined' ){console.error('no leaflet (draw)');return null;};" >> $trg
echo "if ( typeof window.L.Draw !== 'undefined' ) return window.L;" >> $trg
cat ./src/js/tmp-import/leaflet.draw-src.js >> $trg
echo "" >> $trg
echo "return window.L;" >> $trg
echo "});" >> $trg

trg=./src/js/leaflet-markercluster-amd.js
echo "define(['leaflet-amd'],function(){" > $trg
echo "if ( typeof window === 'undefined' ) {console.error('no window  (markercluster)');return null;}" >> $trg
echo "if ( typeof window.L === 'undefined' ){console.error('no leaflet (markercluster)');return null;};" >> $trg
echo "if ( typeof window.L.MarkerClusterGroup !== 'undefined' ) return window.L;" >> $trg
cat ./src/js/tmp-import/leaflet.markercluster-src.js >> $trg
echo "" >> $trg
echo "return window.L;" >> $trg
echo "});" >> $trg